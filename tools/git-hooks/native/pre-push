#!/bin/sh
# [AI-Generated-Copilot] - Native Git pre-push hook

echo "Running pre-push checks..."

# Type checking
echo "ğŸ” Running TypeScript type check..."
if command -v npx >/dev/null 2>&1; then
  npx tsc --noEmit
  if [ $? -ne 0 ]; then
    echo "âŒ TypeScript type checking failed"
    exit 1
  fi
  echo "âœ… TypeScript type checking passed"
else
  echo "âš ï¸  npx not found, skipping type check"
fi

# Run tests if test script exists
if npm run test --silent 2>/dev/null; then
  echo "ğŸ§ª Running tests..."
  npm run test
  if [ $? -ne 0 ]; then
    echo "âŒ Tests failed"
    exit 1
  fi
  echo "âœ… Tests passed"
else
  echo "âš ï¸  No test script found, skipping tests"
fi

# Build check
echo "ğŸ—ï¸  Running production build check..."
npm run build
if [ $? -ne 0 ]; then
  echo "âŒ Production build failed"
  exit 1
fi
echo "âœ… Production build successful"

echo "ğŸš€ All pre-push checks passed!"
exit 0
