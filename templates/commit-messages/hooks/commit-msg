#!/bin/bash
# Pre-commit hook to enforce AI commit message standards
commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# Check if this is an AI-assisted commit
if grep -q "\[AI-" "$commit_msg_file"; then
  # Check for required elements
  if ! grep -q "Generated by:" "$commit_msg_file" \
    || ! grep -q "Reviewed by:" "$commit_msg_file"; then
    echo "ERROR: AI-assisted commits must include 'Generated by:' and 'Reviewed by:' fields"
    exit 1
  fi
  # Log this AI commit
  echo "$(date) - AI-assisted commit detected: '$(head -1 "$commit_msg_file")'" >> .ai-commit-log
fi
exit 0